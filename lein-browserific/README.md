# lein-browserific

A Leiningen plugin for ClojureScript app development.

## Status

This plugin is finished for mobile and desktop as alpha
software. Browser extensions need some more work though.

## Installation

Add this dependency to your project.clj:
```clj
[lein-browserific "0.1.0-alpha"]
```

## Basic Configuration

There are four options to be aware of for the project.clj file:

```clj
:browserific {:config "some/location/config.edn"
              :source-paths "another/spot"
              :multi true
              :draft "safari"}
```

- `:config` - 
  denotes a special location for the app's configuration
  file (defaults to `src/config.edn`).
  
- `:source-paths` - 
  points to the ClojureScript files of your app (default location is
  `src`).
  
- `:multi` - 
  is used for developing browser extensions and expects
  `src/{{app-name}}/content` and `src/{{app-name}}/background` which
  compile into an extension's content.js and background.js,
  respectively. Otherwise, `src/{{app-name}}` is used (defaults to
  false). 

- `:draft` -
  sets the chenex repl (`builds/chenex-repl.clj`) to the specified
  platform and creates a special cljsbuild `draft` profile that outputs
  to `resources/public`. This is meant to help prototype your app before
  deploying it to a native environment. (default is nil) 
  

Before you get coding, you'll need to build the project's `config.edn`
and set up lein-cljsbuild + chenex.

To start the configuration GUI, run:

```sh
lein browserific config 
```

The menu updates your `config.edn` asynchronously while you work, so
don't worry about hitting a `save` button. You can close the window and
stop the server when you've finished filling in the configuration. 

Next, create the builds with:

```sh
lein browserific build
```

This populates the `builds` directory for lein-cljsbuild and chenex.

## Usage

Once the configuration has been writen and your app is coded, the files
can be compiled into the intermediate directory using browserific and
lein-clsjbuild:

```sh
# Single compile
lein browserific compile
lein cljsbuild once

# Auto builds (running in separate shells)
lein auto browserific compile
lein cljsbuild auto
```

To erase the files that were previously generated by browserific, run:

```sh
lein browserific clean
```

For more adventerous folk, exhaustive sample files also exist for how to
write a `config.edn` by hand for each of the platforms. They can be
viewed using:  

```sh
# Gives all config options
lein browserific sample

# Gives only mobile config options (see help for more platforms)
lein browserific mobile
```
Of course, this is not recommended, however, it's there if you need it :-)


## License

Copyright Â© 2014 Ed Babcock

Distributed under the Eclipse Public License v1.0
